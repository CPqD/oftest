To run the tests for MPLS matching/actions, you will need to apply a patch to
a scapy source code.
The file requiring a patch is: scapy/layers/l2.py
The diff is as following:


*** l2.py.original      2010-11-15 14:43:01.231191872 -0800
--- l2.py       2010-11-15 15:38:32.363224361 -0800
***************
*** 230,235 ****
--- 230,243 ----

  conf.neighbor.register_l3(Ether, Dot1Q, lambda l2,l3: conf.neighbor.resolve(l2,l3.payload))

+ 
+ class MPLS(Packet):
+     name = "MPLS"
+     fields_desc = [ BitField("label", 3, 20),
+                     BitField("tc", 0, 3),
+                     BitField("s", 1, 1),
+                     ByteField("ttl", 0) ]
+ 
  class STP(Packet):
      name = "Spanning Tree Protocol"
      fields_desc = [ ShortField("proto", 0),
***************
*** 367,372 ****
--- 375,381 ----
  bind_layers( Dot3,          LLC,           )
  bind_layers( Ether,         LLC,           type=122)
  bind_layers( Ether,         Dot1Q,         type=33024)
+ bind_layers( Ether,         MPLS,          type=0x8847)
  bind_layers( Ether,         Ether,         type=1)
  bind_layers( Ether,         ARP,           type=2054)
  bind_layers( Ether,         EAPOL,         type=34958)
